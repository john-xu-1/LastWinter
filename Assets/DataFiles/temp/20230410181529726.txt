

            #const enemy_max = 10.
            #const enemy_min = 5.
            
            piece_types(player;enemy;item).
            piece_enemy_types(bounce_boi;missile_launcher;rolla_boi;shotgun_boi).
            piece_weapon_types(drone_controller;old_shotgun;rainy_day;magnetized_shifter).

            %% place pieces on nodes %%
            1{piece(player,NodeID): node(NodeID)}1.
            enemy_min{piece(Enemy,NodeID): node(NodeID),piece_enemy_types(Enemy)}enemy_max.
            :- piece_enemy_types(Type), not piece(Type,_).

            %% only one typ of each weapon %%
            4{piece(Weapon,NodeID): node(NodeID), piece_weapon_types(Weapon)}4.
            :- piece_weapon_types(Type), not piece(Type,_). 

            %% only one piece per room %%
            :- Count = {piece(_,NodeID)}, node(NodeID), Count > 1.

            %% start and end nodes %%
            start(NodeID) :- piece(player, NodeID).
            1{end(NodeID):node(NodeID)}1.
            
            %% flood sinks not on end path %%
            path(NodeID, 0, PathID) :- node(NodeID), PathID = NodeID.
            path(NodeID, Step + 1, PathID) :- edge(Source, NodeID), path(Source, Step, PathID), Step < 100.
            sink(PathID) :- node(PathID), end(NodeID), not path(NodeID,_,PathID), path(PathID,_).
            sink_source(NodeID, SinkID) :- edge(NodeID, SinkID), sink(SinkID), not sink(NodeID).

            %% player reach every piece %%
            path(NodeID, 0) :- piece(player,NodeID).
            path(NodeID, Step + 1) :- edge(Source, NodeID), path(Source, Step), Step < 100.
            :- piece(_,NodeID), not path(NodeID,_), node(NodeID).
            :- end(NodeID), not path(NodeID,_).

            %% every piece must be on a node that has a path to the end %%
            :- piece(_,PathID), end(NodeID), not path(NodeID,_,PathID).
            
            #show piece/2.
            #show sink/1.
            #show start/1.
            #show end/1.
            #show sink_source/2.
        
node(513).
edge(513,514).
edge(513,532).
edge(513,535).
node(514).
edge(514,532).
edge(514,535).
edge(514,4097).
edge(514,546).
node(515).
node(516).
edge(516,517).
node(517).
edge(517,526).
edge(517,530).
node(518).
edge(518,526).
node(519).
node(520).
edge(520,531).
node(521).
node(522).
edge(522,514).
edge(522,513).
edge(522,532).
edge(522,535).
node(523).
edge(523,520).
edge(523,1025).
node(524).
edge(524,515).
edge(524,525).
edge(524,527).
node(525).
edge(525,515).
edge(525,527).
node(526).
edge(526,520).
edge(526,2049).
node(527).
node(528).
edge(528,513).
edge(528,514).
edge(528,529).
edge(528,532).
edge(528,535).
node(529).
edge(529,514).
edge(529,513).
edge(529,532).
edge(529,535).
node(530).
edge(530,520).
edge(530,526).
edge(530,2049).
node(531).
node(532).
edge(532,525).
edge(532,527).
edge(532,535).
node(533).
edge(533,520).
edge(533,531).
node(534).
edge(534,536).
node(535).
node(536).
node(537).
edge(537,536).
edge(537,538).
edge(537,539).
node(538).
edge(538,536).
edge(538,539).
node(539).
edge(539,536).
node(540).
edge(540,532).
edge(540,535).
edge(540,4097).
edge(540,546).
node(541).
node(542).
edge(542,533).
node(543).
edge(543,545).
edge(543,548).
edge(543,5121).
node(544).
edge(544,531).
edge(544,549).
node(545).
edge(545,548).
node(546).
edge(546,535).
node(547).
node(548).
node(549).
node(550).
edge(550,4612).
edge(550,4614).
edge(550,4615).
edge(550,565).
edge(550,573).
node(551).
edge(551,545).
edge(551,548).
edge(551,5121).
edge(551,564).
node(552).
edge(552,545).
edge(552,548).
node(553).
node(554).
edge(554,557).
edge(554,559).
node(555).
edge(555,542).
edge(555,557).
edge(555,559).
edge(555,560).
edge(555,565).
edge(555,566).
edge(555,573).
node(556).
edge(556,4614).
edge(556,4615).
edge(556,565).
edge(556,573).
node(557).
edge(557,559).
node(558).
node(559).
node(560).
edge(560,557).
edge(560,559).
edge(560,565).
edge(560,573).
node(561).
node(562).
edge(562,557).
edge(562,559).
edge(562,555).
edge(562,560).
edge(562,565).
edge(562,566).
edge(562,572).
edge(562,573).
node(563).
node(564).
node(565).
edge(565,559).
edge(565,573).
node(566).
edge(566,557).
edge(566,559).
edge(566,560).
edge(566,565).
edge(566,573).
node(567).
edge(567,550).
edge(567,561).
edge(567,570).
node(568).
edge(568,571).
node(569).
edge(569,557).
edge(569,559).
edge(569,565).
edge(569,573).
node(570).
edge(570,561).
edge(570,580).
edge(570,585).
edge(570,589).
edge(570,592).
node(571).
node(572).
edge(572,581).
node(573).
node(574).
edge(574,565).
edge(574,7169).
edge(574,573).
edge(574,572).
edge(574,578).
edge(574,581).
edge(574,584).
node(575).
edge(575,564).
node(576).
edge(576,6657).
edge(576,8193).
edge(576,570).
edge(576,580).
edge(576,583).
node(577).
edge(577,6657).
edge(577,8193).
edge(577,570).
edge(577,576).
edge(577,580).
edge(577,583).
node(578).
edge(578,572).
edge(578,581).
node(579).
edge(579,573).
node(580).
node(581).
edge(581,593).
node(582).
edge(582,571).
node(583).
edge(583,561).
edge(583,8193).
edge(583,570).
edge(583,580).
edge(583,585).
edge(583,589).
edge(583,592).
node(584).
edge(584,572).
edge(584,578).
edge(584,581).
node(585).
edge(585,580).
edge(585,589).
edge(585,592).
edge(585,596).
node(586).
edge(586,580).
edge(586,585).
edge(586,589).
edge(586,592).
edge(586,596).
node(587).
edge(587,581).
edge(587,593).
edge(587,8705).
edge(587,588).
edge(587,597).
edge(587,599).
node(588).
node(589).
node(590).
edge(590,576).
edge(590,591).
node(591).
edge(591,576).
node(592).
edge(592,589).
edge(592,596).
node(593).
edge(593,588).
node(594).
edge(594,580).
edge(594,585).
edge(594,586).
edge(594,589).
edge(594,592).
edge(594,596).
node(595).
node(596).
edge(596,589).
node(597).
edge(597,581).
edge(597,593).
edge(597,8705).
edge(597,588).
edge(597,599).
node(598).
node(599).
edge(599,588).
node(600).
node(601).
node(1025).
edge(1025,520).
node(1537).
edge(1537,516).
edge(1537,517).
node(2049).
edge(2049,520).
edge(2049,531).
edge(2049,533).
edge(2049,2050).
node(2050).
edge(2050,542).
node(2561).
edge(2561,517).
edge(2561,530).
edge(2561,2049).
edge(2561,3073).
edge(2561,4609).
edge(2561,4611).
edge(2561,4612).
node(3073).
edge(3073,530).
edge(3073,2049).
edge(3073,4609).
node(3585).
edge(3585,531).
node(4097).
edge(4097,535).
edge(4097,546).
node(4609).
edge(4609,3073).
edge(4609,2049).
edge(4609,4610).
edge(4609,4611).
node(4610).
edge(4610,2049).
node(4611).
node(4612).
edge(4612,4611).
edge(4612,4614).
node(4613).
node(4614).
edge(4614,4615).
node(4615).
edge(4615,6145).
edge(4615,555).
edge(4615,7169).
node(5121).
edge(5121,545).
edge(5121,548).
edge(5121,552).
node(5633).
edge(5633,550).
node(6145).
edge(6145,542).
edge(6145,555).
node(6657).
edge(6657,550).
edge(6657,567).
edge(6657,561).
edge(6657,8193).
edge(6657,570).
node(7169).
edge(7169,555).
edge(7169,562).
edge(7169,572).
node(7681).
edge(7681,4615).
edge(7681,7169).
node(8193).
edge(8193,567).
edge(8193,561).
edge(8193,570).
edge(8193,580).
node(8705).
edge(8705,581).
edge(8705,593).
edge(8705,588).
